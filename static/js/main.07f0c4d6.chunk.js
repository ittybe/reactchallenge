(this.webpackJsonptestchallengereact=this.webpackJsonptestchallengereact||[]).push([[0],{34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),c=a(24),r=a.n(c),i=(a(34),a(15)),o=a(25),l=a(26),p=a(6),h=a(29),m=a(28),u=(a(35),a(5));var d=function(e){return e.filter((function(t,a){return e.indexOf(t)===a}))};var v=function(e,t){var a=e.split(" ");return-1===a.indexOf(t)&&a.push(t),a.join(" ").trim()};a(36);var j=a(1);var y=function(e){var t="abcdefghijklmnopqrstuvwxyz".split(""),a=Object(s.useState)(""),n=Object(u.a)(a,2),c=n[0],r=n[1],i=Object(s.useRef)(new Array);return Object(s.useEffect)((function(){r(e.pickedLetters)}),[e.pickedLetters]),Object(j.jsxs)("div",{className:"alphabet-picker",children:[Object(j.jsx)("div",{className:"alphabet",children:t.map((function(e,t){return Object(j.jsx)("button",{className:"btn btn--alphabet-letter alphabet__letter \n                            ".concat(-1!==c.indexOf(e.toLowerCase())?"alphabet__letter--active":""),ref:function(e){return i.current.push(e)},onClick:function(){return function(e,t){var a=i.current[t].className;if(console.log("classNameStr: ".concat(a,", ").concat(e,", ").concat(t)),-1!==c.indexOf(e.toLowerCase())){var s=c;s=s.replace(e,""),s=d(s.split("")).join(""),console.log(s),r(s)}else{var n=c;n=d((n+=e).split("")).join(""),console.log(n),r(n)}}(e,t)},children:e},t)}))}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{className:"btn btn--alphabet-picker",onClick:function(){return e.searchForEmployees(c)},children:"Search"})})]})};a(38);var b=function(e){var t=Object(s.useState)(e.isActive),a=Object(u.a)(t,2),n=a[0],c=a[1];return Object(j.jsxs)("div",{className:"employee",children:[Object(j.jsxs)("div",{className:"employee__fullname ".concat(n?"employee__fullname--active":""),children:[e.firstName," ",e.lastName]}),Object(j.jsx)("form",{className:"employee__form",children:Object(j.jsxs)("div",{onChange:function(t){var a=t.target.value;c("active"===a),console.log("value onIsActiveChange: ".concat(a)),e.handleIsActiveChange(e.id,"active"===a)},children:[Object(j.jsxs)("label",{className:"employee__input-container",children:["Not Active",Object(j.jsx)("input",{className:"employee__input",defaultChecked:!1===n,type:"radio",value:"notactive",name:"IsActive"}),Object(j.jsx)("span",{className:"employee__checkmark"})]}),Object(j.jsxs)("label",{className:"employee__input-container",children:["Active",Object(j.jsx)("input",{className:"employee__input",defaultChecked:!0===n,type:"radio",value:"active",name:"IsActive"}),Object(j.jsx)("span",{className:"employee__checkmark"})]})]})})]})};a(39);var f=function(e){return Object(j.jsxs)("div",{className:"lettersection",children:[Object(j.jsx)("div",{className:"lettersection__heading",children:e.letter}),Object(j.jsx)("div",{className:"lettersection__employees",children:function(){var t=e.employees.map((function(t,a){var s=-1!==e.activeEmployees.indexOf(t.id);return Object(j.jsx)(b,{id:t.id,firstName:t.firstName,lastName:t.lastName,isActive:s,handleIsActiveChange:e.handleIsActiveChange},t.id)}));return t.length>0?t:Object(j.jsx)("div",{className:"lettersection__noemployees",children:"No Employees"})}()})]})};a(40);var O=function(e){return Object(j.jsxs)("div",{className:"month",children:[Object(j.jsx)("div",{className:"month__heading",children:e.monthName}),Object(j.jsx)("div",{children:Object(j.jsx)("ul",{className:"month__employees-list",children:function(){var t=e.employees.map((function(e,t){return Object(j.jsxs)("li",{className:"month__employee",children:[e.firstName," ",e.lastName," - ",e.dob]},e.id)}));return t.length>0?t:Object(j.jsx)("li",{className:"month__employee",children:"No employees"})}()})})]})},g=a(14),N=a.n(g),x=a(27),_=a(12),E=a.n(_);function k(){return(k=Object(x.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,E.a.get("https://yalantis-react-school-api.yalantis.com/api/task0/users");case 3:return a=e.sent,t=a.data,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=function(){return k.apply(this,arguments)},C=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={employees:[],activeEmployees:[],searchQuery:[],birthdates:[]},n.pickerElWrapper=Object(s.createRef)(),n.sessionStorageKey="allData",n.searchForEmployees=n.searchForEmployees.bind(Object(p.a)(n)),n.getEmployeesBirthdates=n.getEmployeesBirthdates.bind(Object(p.a)(n)),n.displayEmployeeBirthdates=n.displayEmployeeBirthdates.bind(Object(p.a)(n)),n.handleIsActiveChange=n.handleIsActiveChange.bind(Object(p.a)(n)),n}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){var e=window.sessionStorage,t={activeEmployees:this.state.activeEmployees,searchQuery:this.state.searchQuery,birthdates:this.state.birthdates};console.log("json to save ".concat(t)),e.setItem(this.sessionStorageKey,JSON.stringify(t))}},{key:"componentDidMount",value:function(){var e=this;S().then((function(t){e.setState({employees:t}),console.log("employees parsed")}));var t=window.sessionStorage;if(null!==t.getItem(this.sessionStorageKey)){var a=t.getItem(this.sessionStorageKey);console.log("data after reload: ".concat(a)),a=JSON.parse(a),this.setState({activeEmployees:a.activeEmployees,searchQuery:a.searchQuery,birthdates:a.birthdates})}}},{key:"searchForEmployees",value:function(e){console.log("search query: ".concat(e)),this.pickerElWrapper.current.className=v(this.pickerElWrapper.current.className,"hidden"),this.setState({searchQuery:e.split("")})}},{key:"handleIsActiveChange",value:function(e,t){var a=this,s=Object(i.a)(this.state.activeEmployees);if(t)s.push(e);else{var n=s.indexOf(e);s.splice(n,1)}console.log("active employees ".concat(s)),this.setState({activeEmployees:s},(function(){console.log(a.state.searchQuery),a.displayEmployeeBirthdates()}))}},{key:"setActiveEmployees",value:function(e){this.setState({activeEmployees:e})}},{key:"getEmployeesBirthdates",value:function(){for(var e=[[],[],[],[],[],[],[],[],[],[],[],[]],t=["January","February","March","April","May","June","July","August","September","October","November","December"],a=this.state.activeEmployees,s=this.state.employees,n=function(t){var n=a[t],c=s.filter((function(e){return e.id===n}));if(c.length>0){var i=JSON.parse(JSON.stringify(c[0])),o=new Date(i.dob),l=o.getMonth();r={year:"numeric",month:"long",day:"numeric"},console.log(o.toLocaleDateString("en-US",r)),i.dob=o.toLocaleDateString("en-US",r),e[l].push(i)}},c=0;c<a.length;c++){var r;n(c)}for(var i=0;i<e.length;i++){var o=e[i];e[i]=o.sort((function(e,t){var a=e.lastName.toUpperCase(),s=t.lastName.toUpperCase();return a<s?-1:a>s?1:0}))}console.log("birthdates ".concat(e));for(var l=(new Date).getMonth(),p=[],h=e.length,m=l;h>0;h--){var u=e[m];p.push({monthName:t[m],employees:u}),m+1<e.length?m++:m=0}return p}},{key:"displayEmployeeBirthdates",value:function(){this.setState({birthdates:this.getEmployeesBirthdates()})}},{key:"render",value:function(){var e=this,t=function(t){var a=Object(i.a)(e.state.employees);return a=a.filter((function(e){return e.firstName.toLowerCase().startsWith(t)})).sort((function(e,t){var a=e.firstName.toUpperCase(),s=t.firstName.toUpperCase();return a<s?-1:a>s?1:0}))};return Object(j.jsxs)("div",{className:"app",children:[Object(j.jsx)("div",{className:"alphabet-wrapper",ref:this.pickerElWrapper,children:Object(j.jsx)(y,{searchForEmployees:this.searchForEmployees,pickedLetters:this.state.searchQuery.join("")})}),Object(j.jsxs)("div",{className:"app__data-wrapper",children:[Object(j.jsxs)("div",{className:"employees",children:[Object(j.jsx)("div",{className:"employees__heading",children:"Employees"}),Object(j.jsx)("div",{className:"info-wrapper info-wrapper--lettersection",children:this.state.searchQuery.map((function(a,s){return Object(j.jsx)(f,{letter:a.toUpperCase(),employees:t(a),activeEmployees:e.state.activeEmployees,handleIsActiveChange:e.handleIsActiveChange},s)}))})]}),Object(j.jsxs)("div",{className:"birthdates",children:[Object(j.jsx)("div",{className:"birthdates__heading",children:"Employees Birthday"}),Object(j.jsx)("div",{className:"info-wrapper",children:function(){var t=e.state.birthdates.map((function(e,t){return Object(j.jsx)(O,{monthName:e.monthName,employees:e.employees},t)}));return e.state.activeEmployees.length>0?t:Object(j.jsx)("div",{className:"months-wrapper__no-employees",children:"Employees List is empty"})}()})]})]})]})}}]),a}(n.a.Component),w=a(13),A=a(2);r.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(w.a,{children:Object(j.jsx)(A.c,{children:Object(j.jsx)(A.a,{path:"/reactchallenge/employees",element:Object(j.jsx)(C,{})})})})}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.07f0c4d6.chunk.js.map